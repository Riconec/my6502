/*
 * Simple 6502 computer for ice40up5k FPGA.
 *
 * (C) Daniel Serpell, <daniel.serpell@gmail.com>
 *
 * Feel free to use this code in any project (commercial or not), as long as you
 * keep this message, and the copyright notice. This code is provided "as is",
 * without any warranties of any kind.
 *
 */

// Generates keyboard translation table for the FPGA BRAM

/*
 * The columns in this table are:
 *  - PS/2 key code (set #2), with high bit set for E0 codes
 *  - ASCII code returned without SHIFT pressed
 *  - ASCII code returned with SHIFT pressed
 *
 * Also, if ASCII code has eight bit set, it is instead the
 * SHIFT key associated with the code:
 *     1 : SHIFT
 *     2 : CONTROL
 *     4 : ALT
 *     8 : Windows Key
 */
static unsigned char codes[][3] = {
{ 0x01,	0x09, 0x09 },	// F9
{ 0x03,	0x05, 0x05 },	// F5
{ 0x04,	0x03, 0x03 },	// F3
{ 0x05,	0x01, 0x01 },	// F1
{ 0x06,	0x02, 0x02 },	// F2
{ 0x07,	0x0C, 0x0C },	// F12
{ 0x09,	0x0A, 0x0A },	// F10
{ 0x0A,	0x08, 0x08 },	// F8
{ 0x0B,	0x06, 0x06 },	// F6
{ 0x0C,	0x04, 0x04 },	// F4
{ 0x0D,	0x0E, 0x0E },	// Tab
{ 0x0E,	0x60, 0x7E },	// `   ~
{ 0x11,	0x84, 0x84 },	// L-Alt
{ 0x12,	0x81, 0x81 },	// L-Shift
{ 0x14,	0x82, 0x82 },	// Control
{ 0x15,	0x51, 0x71 },	// Q
{ 0x16,	0x31, 0x21 },	// 1   !
{ 0x1A,	0x5A, 0x7A },	// Z
{ 0x1B,	0x53, 0x73 },	// S
{ 0x1C,	0x41, 0x61 },	// A
{ 0x1D,	0x57, 0x77 },	// W
{ 0x1E,	0x32, 0x40 },	// 2   @
{ 0x21,	0x43, 0x63 },	// C
{ 0x22,	0x58, 0x78 },	// X
{ 0x23,	0x44, 0x64 },	// D
{ 0x24,	0x45, 0x65 },	// E
{ 0x25,	0x34, 0x24 },	// 4   $
{ 0x26,	0x33, 0x23 },	// 3   #
{ 0x29,	0x20, 0x20 },	// Space
{ 0x2A,	0x56, 0x76 },	// V
{ 0x2B,	0x46, 0x66 },	// F
{ 0x2C,	0x54, 0x74 },	// T
{ 0x2D,	0x52, 0x72 },	// R
{ 0x2E,	0x35, 0x25 },	// 5   %
{ 0x31,	0x4E, 0x6E },	// N
{ 0x32,	0x42, 0x62 },	// B
{ 0x33,	0x48, 0x68 },	// H
{ 0x34,	0x47, 0x67 },	// G
{ 0x35,	0x59, 0x79 },	// Y
{ 0x36,	0x36, 0x5E },	// 6   ^
{ 0x3A,	0x4D, 0x6D },	// M
{ 0x3B,	0x4A, 0x6A },	// J
{ 0x3C,	0x55, 0x75 },	// U
{ 0x3D,	0x37, 0x26 },	// 7   &
{ 0x3E,	0x38, 0x2A },	// 8   *
{ 0x41,	0x2C, 0x3C },	// ,   <
{ 0x42,	0x4B, 0x6B },	// K
{ 0x43,	0x49, 0x69 },	// I
{ 0x44,	0x4F, 0x6F },	// O
{ 0x45,	0x30, 0x29 },	// 0   )
{ 0x46,	0x39, 0x28 },	// 9   (
{ 0x49,	0x2E, 0x3E },	// .   >
{ 0x4A,	0x2F, 0x3F },	// /   ?
{ 0x4B,	0x4C, 0x6C },	// L
{ 0x4C,	0x3B, 0x3A },	// ;   :
{ 0x4D,	0x50, 0x70 },	// P
{ 0x4E,	0x2D, 0x5F },	// -   _
{ 0x52,	0x27, 0x22 },	// '   "
{ 0x54,	0x5B, 0x7B },	// [   {
{ 0x55,	0x2B, 0x3D },	// +   =
{ 0x58,	0x16, 0x16 },	// CapsLock
{ 0x59,	0x81, 0x81 },	// R-Shift
{ 0x5A,	0x0D, 0x0D },	// Enter
{ 0x5B,	0x5D, 0x7D },	// ]   }
{ 0x5D,	0x5C, 0x7C },	// \   |"
{ 0x66,	0x7F, 0x7F },	// BackSpc
{ 0x69,	0x31, 0x31 },	// Kp 1
{ 0x6B,	0x34, 0x34 },	// Kp 4
{ 0x6C,	0x37, 0x37 },	// Kp 7
{ 0x70,	0x30, 0x30 },	// Kp 0
{ 0x71,	0x2E, 0x2E },	// Kp .
{ 0x72,	0x32, 0x32 },	// Kp 2
{ 0x73,	0x35, 0x35 },	// Kp 5
{ 0x74,	0x36, 0x36 },	// Kp 6
{ 0x75,	0x38, 0x38 },	// Kp 8
{ 0x76,	0x1B, 0x1B },	// ESC
{ 0x77,	0x17, 0x17 },	// NumLock
{ 0x78,	0x0B, 0x0B },	// F11
{ 0x79,	0x2B, 0x2B },	// Kp +
{ 0x7A,	0x33, 0x33 },	// Kp 3
{ 0x7B,	0x2D, 0x2D },	// Kp -
{ 0x7C,	0x2A, 0x2A },	// Kp *
{ 0x7D,	0x39, 0x39 },	// Kp 9
{ 0x7E,	0x19, 0x19 },	// ScrollLck
{ 0x83,	0x07, 0x07 },	// F7
{ 0x84,	0x00, 0x00 },	// Alt+PntScr
{ 0x91,	0x84, 0x84 },	// R-Alt
{ 0x92,	0x00, 0x00 },	// Fake-Shift
{ 0x94,	0x82, 0x82 },	// R-Ctrl
{ 0x9F,	0x88, 0x88 },	// L-Win
{ 0xA7,	0x88, 0x88 },	// R-Win
{ 0xAF,	0x0F, 0x0F },	// Menu
{ 0xCA,	0x2F, 0x2F },	// Kp /
{ 0xDA,	0x0D, 0x0D },	// Kp Enter
{ 0xE9,	0x11, 0x11 },	// End
{ 0xEB,	0x1E, 0x1E },	// Left
{ 0xEC,	0x10, 0x10 },	// Home
{ 0xF0,	0x12, 0x12 },	// Insert
{ 0xF1,	0x13, 0x13 },	// Delete
{ 0xF2,	0x1D, 0x1D },	// Down
{ 0xF4,	0x1F, 0x1F },	// Right
{ 0xF5,	0x1C, 0x1C },	// Up
{ 0xFA,	0x14, 0x14 },	// Page-Dwn
{ 0xFC,	0x18, 0x18 },	// PrintScr
{ 0xFD,	0x15, 0x15 },	// Page-Up
{ 0xFE,	0x1A, 0x1A },	// Ctrl+Pause
{ 0xFF, 0x00, 0x00 },

{ 0, 0, 0} };

#include <stdio.h>

int main()
{
    int k = 0;
    for(int i=0; codes[i][0]; i++)
    {
        int n = 0;
        while( k != codes[i][0] )
        {
            k++;
            printf(" %05x\n", n);
        }
        if( codes[i][1] & 0x80 )
            // Shift key
            n = (codes[i][1] & 0x0F) << 14;
        else
            n = (codes[i][1] << 7) | (codes[i][2]);
        printf(" %05x\n", n);
        k++;
    }
    return 0;
}
